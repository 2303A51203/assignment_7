<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Food Delivery App</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background-color: #f4f4f4;
        margin: 0;
        padding: 0;
    }
    header {
        background-color: #ff4d4d;
        color: white;
        text-align: center;
        padding: 1.5rem 0;
        font-size: 1.8rem;
    }
    .container {
        max-width: 900px;
        margin: 2rem auto;
        padding: 1.5rem;
        background-color: white;
        border-radius: 10px;
        box-shadow: 0 0 15px rgba(0,0,0,0.1);
    }
    h2 {
        color: #ff4d4d;
        margin-bottom: 1rem;
    }
    .restaurant, .strategy, .tracking {
        margin-bottom: 2rem;
    }
    .order-card {
        border: 1px solid #ddd;
        padding: 1rem;
        margin-bottom: 1rem;
        border-radius: 8px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        background-color: #fff8f8;
    }
    button {
        background-color: #ff4d4d;
        color: white;
        border: none;
        padding: 0.5rem 1rem;
        margin-left: 0.5rem;
        border-radius: 5px;
        cursor: pointer;
    }
    button:hover {
        background-color: #e60000;
    }
    select {
        padding: 0.4rem;
        font-size: 1rem;
        border-radius: 5px;
        border: 1px solid #ccc;
    }
    .delivery-fee {
        font-weight: bold;
        margin-top: 0.5rem;
    }
    .notification {
        background-color: #ffefc6;
        border: 1px solid #ffd700;
        padding: 0.8rem;
        margin-top: 1rem;
        border-radius: 5px;
        display: none;
    }
</style>
</head>
<body>

<header>Food Delivery App</header>

<div class="container">

    <!-- Restaurants Section -->
    <div class="restaurant">
        <h2>Restaurants</h2>
        <div class="order-card">
            <div>
                <strong>Pizza Place</strong> - Margherita Pizza
            </div>
            <div>
                <button onclick="placeOrder('Pizza Place', 'Margherita Pizza')">Place Order</button>
                <button onclick="cancelOrder('Pizza Place', 'Margherita Pizza')">Cancel Order</button>
            </div>
        </div>
        <div class="order-card">
            <div>
                <strong>Sushi Corner</strong> - California Roll
            </div>
            <div>
                <button onclick="placeOrder('Sushi Corner', 'California Roll')">Place Order</button>
                <button onclick="cancelOrder('Sushi Corner', 'California Roll')">Cancel Order</button>
            </div>
        </div>
        <div id="notification" class="notification"></div>
    </div>

    <!-- Delivery Fee Strategy Section -->
    <div class="strategy">
        <h2>Delivery Fee Strategy</h2>
        <select onchange="setDeliveryStrategy(this.value)">
            <option value="standard">Standard Delivery</option>
            <option value="express">Express Delivery</option>
            <option value="free">Free Delivery Coupon</option>
        </select>
        <p class="delivery-fee">Delivery Fee: $<span id="deliveryFee">5</span></p>
    </div>

    <!-- Order Tracking Section -->
    <div class="tracking">
        <h2>Order Tracking</h2>
        <button onclick="trackOrder()">Track Order</button>
        <p id="trackingStatus">No order placed yet.</p>
    </div>

</div>

<script>
    // ================= Observer Pattern =================
    const deliveryAgents = [];
    function addDeliveryAgent(agent) { deliveryAgents.push(agent); }
    function notifyDeliveryAgents(order) {
        deliveryAgents.forEach(agent => agent.update(order));
        const notification = document.getElementById('notification');
        notification.style.display = 'block';
        notification.innerText = `Delivery Agents Notified: ${order.item} from ${order.restaurant}`;
        setTimeout(() => { notification.style.display = 'none'; }, 3000);
    }

    // Sample agent
    const agent1 = { update: (order) => console.log("Agent1 notified:", order) };
    addDeliveryAgent(agent1);

    // ================= Strategy Pattern =================
    let deliveryStrategy = 'standard';
    function setDeliveryStrategy(strategy) {
        deliveryStrategy = strategy;
        updateDeliveryFee();
    }
    function updateDeliveryFee() {
        let fee = 0;
        if(deliveryStrategy === 'standard') fee = 5;
        else if(deliveryStrategy === 'express') fee = 10;
        else if(deliveryStrategy === 'free') fee = 0;
        document.getElementById('deliveryFee').textContent = fee;
    }
    updateDeliveryFee();

    // ================= Command Pattern =================
    const commands = {
        place: (restaurant, item) => {
            notifyDeliveryAgents({restaurant, item});
            document.getElementById('trackingStatus').textContent = `Order placed: ${item} from ${restaurant}`;
        },
        cancel: (restaurant, item) => {
            document.getElementById('trackingStatus').textContent = `Order canceled: ${item} from ${restaurant}`;
        },
        track: () => {
            alert(document.getElementById('trackingStatus').textContent);
        }
    };
    function placeOrder(restaurant, item) { commands.place(restaurant, item); }
    function cancelOrder(restaurant, item) { commands.cancel(restaurant, item); }
    function trackOrder() { commands.track(); }
</script>

</body>
</html>
